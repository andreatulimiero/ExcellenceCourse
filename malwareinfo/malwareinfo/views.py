from django.shortcuts import render

from .models import Malware, Report, AntivirusReport

def index(req):
  infos = {}
  malwareno = 0
  # for m in Malware.objects.all():
  #   if malwareno >= 20:
  #     break
  #   infos[m] = {}
  #   r = Report.objects.filter(malware = m).first()
  #   if r is None:
  #     break
  #   malwareno += 1
  #   infos[m]['report'] = r
  #   infos[m]['ant_report'] = AntivirusReport.objects.filter(report=r).all()
  r = Report.objects.last()
  m = r.malware
  a = AntivirusReport.objects.filter(report=r).all()
  infos[m] = {}
  infos[m]['report'] = r
  infos[m]['ant_report'] = a
  # print(infos)
  return render(req, "dashboard.html", {'info_list': infos})