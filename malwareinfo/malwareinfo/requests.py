import requests
import os.path
from django.conf import settings

from .models import Malware, PendingRequest, Report, AntivirusReport

class VirusTotalAPI():
  API_KEY = '0581ee023cb156482b7873653fec2b471f21d15d20357788c86ddcd5e625e08c'
  BASE_URL = 'https://www.virustotal.com/vtapi/v2'
  
  RATE_LIMIT_ERROR = 204

  @staticmethod
  def scan(filepath):
    filename = os.path.basename(filepath)
    PATH = '/file/scan'


    params = {'apikey': VirusTotalAPI.API_KEY}
    files = {'file': (filename, open(filepath, 'rb'))}
    response = requests.post(VirusTotalAPI.BASE_URL + PATH, files=files, params=params)
    return response.json()

def grab_samples():



def scan_file():
  pass
